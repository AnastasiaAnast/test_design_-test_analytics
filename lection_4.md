# Граничные значения и доменный анализ

1. Что такое граничные и околограничные значения.
2. В каких случаях применима техника граничных значений.
3. Зачем тестировать граничные значения.
4. Как определять границы и околограничные значения.
5. Доменный анализ и таблица доменного анализа.
6. Алгоритм построения таблицы доменного анализа на примере.

# Что такое граничные значения и зачем их тестировать?

**Граничное значение (border condition, boundary condition)** — значение, находящееся на границе линейного класса эквивалентности. Значения, разделяющие КЭ.
**Техника анализа граничных значений (boundary value testing)** — техника, проверяющая поведение системы/отдельного модуля на граничных значениях входных данных.

## Зачем тестировать граничные значения?

_Граничные значения - элементаы повышенного риска_, требуют пристального внимания тестировщика.
Помимо границ, тестировать нужно приграничные значения, т.е. лежащие максимально близко слева и справа от границы.

## Как определить ближайшее значение?

Ззависит от единиц измерения, разрядности чисел, используемых в программе.
Переменная принимает только целые значения, граница = 10 - ближайшие приграничные значения 9, 11.
Переменная - десятичная дробь с двумя знаками после запятой, то граница = 10,00, приграничные значения — 10,01, 9,99.

# Типы линейных КЭ

**По значению** — для числовых переменных

**По структуре** - для характеристик поля/параметра:

- длина строки;
- длина числа;
- размер файла;
- объем памяти;
- прочие характеристики, выражающиеся в числовом эквиваленте.

## Классы эквивалентности по значению:

Банк принимает положительное решение о выдаче кредита, если заемщику от 18 до 50 лет, и его доход составляет не менее 50 000 рублей в месяц. В этом случае на решение влияет два параметра: возраст и ежемесячный доход. По значению они разбиваются на классы:

                возраст: (0; 18), [18; 50], (50; +∞)
               доход: [0; 50000), [50000; +∞)

## Классы эквивалентности по структуре:

User story: Я как пользователь хочу сохранить параметры поиска прогноза погоды, чтобы в будущем получать прогноз быстрее

Use case:
Пользователь: указывает параметры для прогноза
Пользователь: нажимает кнопку «В избранное»
Система: показывает диалоговое окно «Укажите название шаблона»
Пользователь: вводит название
Название валидное (от 1 до 30 символов)
Система: сохраняет шаблон в избранное
Название невалидное
Система: показывает сообщение «Длина названия от 1 до 30 символов»

Параметр — длина строки от 1 до 30 символов. Для него выделим классы эквивалентности:
[0; 1) — негативный сценарий
[1; 30] — позитивный сценарий
(30; +∞) — негативный сценарий

| Длина строки | Примечание            | Результат                          |
| ------------ | --------------------- | ---------------------------------- |
| 0            | Приграничное значение | Длина названия от 1 до 30 символов |
| 1            | Граница               | Успех                              |
| 2            | Приграничное значение | Успех                              |
| 29           | Приграничное значение | Успех                              |
| 30           | Граница               | Успех                              |
| 31           | Приграничное значение | Длина названия от 1 до 30 символов |

_2 границы - 6 проверок. Сократить проверки - убрать значения, находящиеся внутри КЭ_. Сделать так, чтобы при этом покрытие не пострадало - тема далее - "Доменный анализ".

## Алгоритм тестирования линейных КЭ

1. Для параметра определить КЭ по значению.
2. Для параметра определить КЭ по структуре.
3. Найти границы КЭ.
4. Найти приграничные значения.
5. Протестировать на граничных, приграничных значениях.

## Доменный анализ позволяет оптимизировать тестирование линейных КЭ.

Разбиваем диапазон интервалов на поддиапазоны/домены с последующим выбором одного/нескольких значений из каждого домена/диапазона для тестирования в соответствии с опред правилами.

Техника доменного анализа пересекается с техникой разбиения на КЭ и анализа граничных значений. Также в ней можно использовать попарные комбинации если есть нелинейные КЭ.

**Осн. принцип доменного анализа** - комбинация значений на границах и внутри интервалов - сокращение проверок.

Точки:

- on - лежит строго на границе
- off - лежит слева/справа от границы, т.е. точки on (интервал **закрыт** со стороны точки on, точка off лежит **вне** интервала; интервал **открыт** со стороны точки on, точка off лежит **внутри** интервала)
- in - любое значение внутри интервала, ближе к середине

**закрытый** интервал:

- [1; 30] — закрыт с обеих сторон.
- [1, 30) — закрыт со стороны нижней границы.

**открытый** интервал:

- (1; 30) — открыт с обеих сторон.
- [1, 30) — открыт со стороны верхней границы.

## Составление таблицы доменного анализа

Шаг 1. Создадим таблицу, внесем в нее:

1. параметры, для которых есть линейные КЭ;
2. для каждого параметра — граничные значения со знаками >, <, >=, <=;
3. для каждой границы — строки on, off;
4. для каждого параметра — значение in.

![step1](/step1.png)

Шаг 2. Заполняем только строки on и off для всех параметров по диагонали (т.е. в одной колонке должно быть только 1 значение on или off для 1 параметра - тк элемент повышенного риска).

![step2](/step2.png)

Шаг 3. Теперь заполняем значения in. В каждой колонке в итоге должно быть значение on / off для одного параметра и значение in для остальных.

![step3](/step3.png)

Шаг 4. Дополним таблицу оставшимися параметрами, которые были предварительно скомбинированы по принципу pairwise

![step4](/step4.png)

Шаг 5. Выделим красным цветом невалидные значения и добавим ожидаемый результат.

![step5](/step5.png)

Шаг 6. При необходимости в таблицу можно добавить дополнительные отрицательные проверки. Главное — придерживаться правила: не комбинировать невалидные значения. Один тест — одно невалидное значение, остальные — валидные

![step6](/step6.png)

В итоге вместо 21 теста получилось 13, при этом проверяются и границы, и значения внутри и вне интервалов, а также негативные кейсы.
