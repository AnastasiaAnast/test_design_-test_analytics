# Таблицы принятия решений

- Что такое таблицы принятия решений, и зачем они нам нужны?
- Алгоритм составления на примерах.
- Плюсы и минусы таблиц принятия решений.

## Что такое таблицы принятия решений, зачем нужны?

Для тестирования программ со сложной бизнес-логикой (кредиты, продукты банка).
Применимы когда есть набор правил/условий, и выходные данные зависят от комбинации этих правил/условий.

### Пример таблицы принятия решений:

Определение максимальной возможной суммы ипотеки

**User story**:
Я как заёмщик хочу узнать, какую максимальную сумму ипотеки одобрит банк.

**Use case**:
Пользователь: указывает дату рождения.
Пользователь: указывает ежемесячный доход.
Пользователь: указывает, может ли подтвердить доход справкой 2-НДФЛ или по форме банка.
Пользователь: указывает срок ипотеки.
Система: определяет максимальную сумму кредита

**Правила**:

1. Ипотека выдаётся под 6% годовых
2. Ипотека не выдаётся зёмщикам младше 18 лет
3. Сумма кредита вычисляется по формуле: (Ежемесячный доход х Срок в месяцах х К) / (1 + 0,005 х Срок в месяцах)
4. Если доход подтверждён справкой, К = 0,3.
5. Если доход не подтверждён справкой / менее 20 000 рублей, К = 0,1.
6. Если заёмщику больше 55 лет, кредит выдаётся только при наличии созаёмщика.

**Параметры**, **Условия в таблице**:
От чего будет зависеть сумма кредита?

- Возраст заёмщика
- Ежемесячный доход
- Возможность подтвердить доход справкой

**Классы эквивалентности** параметров, влияющих на сумму кредита:

- Возраст: до 18, 18 - 55, больше 55
- Доход не менее 20 000 руб.: да, нет
- Справка: есть, нет

**Что нужно определить**? **Действия в таблице**

- Максимальную сумма кредита. Если выдать кредит невозможно, максимальная сумма = 0
- Нужен ли созаёмщик
- Какой применить коэффициент

## Алгоритм составления таблицы

Шаг 1. **Выписать в таблицу все условия и действия**
![step1](</step1(1).png>)
Шаг 2. **Определить кол-во столбцов**
Перемножить кол-во вариантов для каждого условия.
В нашем случае: 3 х 2 х 2 = 12. Всего 12 комбинаций/столбцов.
Шаг 3. **Заполнить первое условие**
Так как больше всего вариантов в первом условии, оно и будет идти первым в таблице (больше всего наборов/ интервалов в КЭ: возраст - 3 интервала)
Помним, что в таблице будет 12 комбинаций (проверок).
_12 / 3 = 4, по 4 ячейка заполняем в каждом из значений вариантов возраста_
указываем именно КЭ, а не конкретные значения
![step3](</step3(1).png>)
Шаг 4. **Заполнить 2-е условие**
Каждое уникальное значение первого варианта заполняет по 4 ячейки. Всего в таблице 12 комбинаций (проверок).
Здесь 4 / 2 = 2 (уникальные варианты 1-го КЭ / кол-во возможных наборов КЭ для второго параметра/условия)
![step4](</step4(1).png>)
Шаг 5. **Заполнить 3-е условие**
Каждое уникальное значение первого варианта заполняет по 4 ячейки, каждые 2 из них заполнены каждым из значений второго варианта. Всего в таблице 12 комбинаций (проверок).
Кол-во ячеек 2-го параметра / кол-во КЭ 3-го параметра (2 / 2 = 1 - чередование "есть" и "нет" через один)
![step5](</step5(1).png>)
Шаг 6. **Заполнить действие. Определить коэффициент**
Требования для коэффициента:

1. Если доход подтверждён справкой, К = 0,3.
2. Если доход не подтверждён справкой или менее 20 000 руб., К = 0,1.

![step6](</step6(1).png>)

Шаг 7. **Заполнить действия. Вычислить максимальную сумму**
Чтобы составлять формулу в строке « Ежемесячный доход» было проще, заменим «Да» на 50 000, а «Нет» — на 10 000. Формулу запишем в 1 ячейке и скопируем в остальные.
![step7](</step7(1).png>)

Шаг 8. **Заполнить действие. Заполнить необходимость созаёмщика**

![step8](</step8(1).png>)

### Плюсы таблиц принятия решений

- Оперативное составление тестовых сценариев.
- Выявление неполноты требований.
- Если нет требований, таблицы могут заменить их.
- Проверка полноты покрытия требований тест-кейсами.
- Дают возможность предугадывать дефекты.

### Минусы таблиц принятия решений

- Если продукт масштабный, таблицу трудно использовать, при составлении можно допустить ошибку.
- При первоначальном проектировании условия не всегда могут быть определены корректно.
- нельзя сократить кол-во вариантов, как в парвайз, все варианты - нужны
